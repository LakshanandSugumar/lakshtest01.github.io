{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"","tags":["tag1","tag2"]},{"location":"#welcome-to-lakshanand-sugumars-subsystem-datasheet","title":"Welcome to Lakshanand Sugumar\u2019s Subsystem Datasheet","text":"","tags":["tag1","tag2"]},{"location":"#automatic-door-opener-team-103","title":"Automatic Door Opener \u2014 Team 103","text":"","tags":["tag1","tag2"]},{"location":"#introduction","title":"Introduction","text":"<p>This datasheet focuses on the design and programming of the Flex Sensor in the Private Use Automatic Door Opener</p>","tags":["tag1","tag2"]},{"location":"#project-summary","title":"Project Summary","text":"<p>This project focuses on the Motor Control Subsystem \u2014 one of the four key subsystems of the Automatic Door Opener. The overall system is designed to enable door operation through sensors rather than traditional buttons or handles, providing hands-free access for improved safety, convenience, and accessibility in households where users often have their hands full.</p> <p>The Motor Control Subsystem receives input from two IR sensors, a flex sensor, and a rotary encoder. These inputs allow the subsystem to interpret when to activate, stop, or disengage the motor during door movement. In particular, the flex sensor plays a crucial role in detecting door bending or resistance. It compares its readings with the rotary encoder values to determine if the motor should continue running or stop \u2014 for instance, when the door is fully open, obstructed, or manually disengaged. This helps prevent unnecessary power consumption and enhances system safety.</p> <p>The final team report will integrate this subsystem with the other three \u2014 Sensor Detection, Control Logic, and Power Management \u2014 showing how they communicate and share data to achieve seamless automatic door operation.</p> <p>For a complete overview of the full system design and team collaboration, visit the team report.</p>","tags":["tag1","tag2"]},{"location":"#my-contribution","title":"My Contribution","text":"<ul> <li> <p>Created and maintained a public GitHub test repository for initial code and documentation setup.</p> </li> <li> <p>Managed the team\u2019s main GitHub repository, ensuring version control, organization, and consistent updates across all subsystems.</p> </li> <li> <p>Served as the Assignment Leader, coordinating team tasks, integrating individual subsystem work, and ensuring timely submission of deliverables to Canvas.</p> </li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/","title":"Individual Block Diagram","text":"","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#overview","title":"Overview","text":"<p>This subsystem is responsible for reading analog data from the flex sensor and communicating the interpreted results to the motor subsystem to control door movement. All components within this subsystem operate on a regulated 5 V supply, derived from a 9 V input through an onboard voltage regulator, as shown in the dashed region of the block diagram.</p> <p>The Microchip PIC18F57Q43 Curiosity Nano serves as the primary controller. It performs three main tasks:</p> <ul> <li>Reads the flex sensor\u2019s analog output using its internal ADC.</li> <li>Processes the sensor data to determine door position and bend state.</li> <li>Sends digital status/control signals to external subsystems.</li> </ul> <p>This subsystem interfaces directly with both the Motor Subsystem and the Rotary Sensor Subsystem. The rotary sensor inputs are used for cross-validation: the system compares the physical bend of the door (flex sensor) with the rotation angle (rotary sensor). Any mismatch indicates a mechanical failure (e.g., motor spinning without moving the door), enabling fault detection and automatic shutdown.</p> <p>This interaction improves safety, prevents motor overrun, and reduces power waste. For a full system-level view of all interconnected subsystems, refer to the team report.</p> <p></p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#subsystem-role","title":"Subsystem Role","text":"<p>The Flex Sensor Subsystem acts as a feedback + validation node in the overall system architecture. Its primary function is to:</p> <ul> <li>Convert real-world bending motion into a readable electrical signal</li> <li>Translate that signal into actionable logic for the motor subsystem</li> <li>Detect abnormal or unsafe mechanical conditions through sensor comparison</li> </ul> <p>The rotary sensor signals shown on the right side of the diagram are external inputs and are not part of this subsystem\u2019s hardware. They are included to document the communication pathway and show how this subsystem cooperates with others to maintain correct and safe system behavior.</p> <p>draw.io </p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#how-each-element-of-the-block-diagram-helps-meet-product-requirements","title":"How Each Element of the Block Diagram Helps Meet Product Requirements","text":"<p>The Flex Sensor Subsystem is responsible for detecting door bending, validating door motion using rotary encoder data, and signaling the motor subsystem when to continue, stop, or shut down immediately. Each block in the diagram directly contributes to product requirements such as safety, fault detection, accurate position sensing, and reliable subsystem communication.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#flex-sensor-spectra-symbol-fs-l-095-103-st","title":"Flex Sensor (Spectra Symbol FS-L-095-103-ST)","text":"<ul> <li>Measures bending of the door and converts it into an analog voltage.</li> <li>Supports accurate tracking of door movement.</li> <li>Enables early detection of abnormal bending conditions.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#voltage-divider-op-amp-mcp6004-low-pass-filter","title":"Voltage Divider + Op-Amp (MCP6004 Low-Pass Filter)","text":"<ul> <li>Converts resistance-based flex changes into usable voltage.</li> <li>Filters electrical noise to provide stable ADC readings.</li> <li>Ensures reliable, accurate measurement required for safe door control.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#microchip-pic18f57q43-curiosity-nano","title":"Microchip PIC18F57Q43 Curiosity Nano","text":"","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#ra0-adc1-flex-sensor-input","title":"RA0 \u2192 ADC1 (Flex Sensor Input)","text":"<ul> <li>Reads the 0\u20135 V conditioned flex sensor output.</li> <li>Converts it into digital form for angle calculation.</li> <li>Enables real-time decision-making for motor control.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#rotary-encoder-inputs-adc2-and-uart","title":"Rotary Encoder Inputs (ADC2 and UART)","text":"<ul> <li>Provide independent rotational angle measurements.</li> <li>Used for cross-validation with flex sensor data.</li> <li>Detect mechanical issues such as:</li> <li>Motor running without door movement</li> <li>Excessive or unexpected bending</li> <li>Jammed or obstructed door</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#rf1-ra2-communication-with-motor-subsystem","title":"RF1 / RA2 (Communication with Motor Subsystem)","text":"<ul> <li>Send commands such as \"continue,\" \"stop,\" or \"emergency stop.\"</li> <li>Provide fault feedback for safety-critical behavior.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#digital-io-ports-rc3-ra1-rb2-rc4-ra3","title":"Digital I/O Ports (RC3, RA1, RB2, RC4, RA3)","text":"<ul> <li>Enable debugging, sensor validation, and internal system communication.</li> <li>RA3 specifically drives the error LED for visible fault detection.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#red-led-flex-sensor-error-indicator","title":"Red LED (Flex Sensor Error Indicator)","text":"<ul> <li>Illuminates when unsafe bending or mismatched sensor data is detected.</li> <li>Aids both user awareness and subsystem debugging.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#switch-debugging","title":"Switch (Debugging)","text":"<ul> <li>Allows manual testing of control logic.</li> <li>Supports calibration and verification during development.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#connector-2-digital-analog-interface","title":"Connector 2 (Digital + Analog Interface)","text":"<ul> <li>Provides structured outputs to motor subsystem and other modules.</li> <li>Ensures clean, modular subsystem integration.</li> <li>Enables transfer of angle data, stop signals, and digital I/O.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#5-v-voltage-regulator-digi-key-785-14a2-5-nd","title":"5 V Voltage Regulator (Digi-Key 785-14A2-5-ND)","text":"<ul> <li>Converts external 9 V supply into a stable 5 V rail.</li> <li>Prevents noise-induced sensor drift or microcontroller instability.</li> <li>Ensures safe and reliable operation for all subsystem components.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#summary-of-requirement-satisfaction","title":"Summary of Requirement Satisfaction","text":"Requirement Contribution Accurate door position sensing Flex sensor + op-amp + ADC1 convert bending into stable angle readings. Redundant sensing for safety Rotary encoder inputs cross-check flex sensor behavior. Fault &amp; obstruction detection Mismatch in rotation vs. bending triggers immediate stop. Safe motor operation MCU sends real-time stop/continue commands. User-visible error reporting Red LED shows sensor or mechanical faults. Stable system operation Voltage regulator and filtering ensure consistent performance.","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/","title":"Component Selection (Individual \u2014 Flex Sensor Subsystem)","text":""},{"location":"02-Component-Selection/Component-Selection/#block-flex-sensor","title":"Block: Flex Sensor","text":"<p>Role: Measures bend angle; resistance increases with bend. Routed through a divider to 0\u20135 V for the ADC.</p> Solution Photo Cost Link Pros Cons Option 1: Spectra Symbol FS-L-095-103-RH (95 mm, 10 k\u03a9) ~\\(16\u2013\\)20 Digi-Key product page \u2022 Stock 10 k\u03a9 \u2022 Clear datasheet &amp; ordering guide \u2022 \u201cRH\u201d solder tab option \u2022 \u00b130% R tolerance \u2022 Needs tail strain relief Option 2: Spectra Symbol FS-L-060-103 (60 mm) ~\\(15\u2013\\)18 Mouser FS-L-060-103 \u2022 Shorter length for tight spaces \u2022 Same 10 k\u03a9 nominal \u2022 Similar calibration behavior \u2022 Smaller absolute ADC swing for same bend Option 3: Flexpoint Bend Sensor (10 k\u03a9 class) ~\\(10\u2013\\)20 Mouser bend sensors \u2022 Alternative vendor/lead times \u2022 Multiple formats/lengths \u2022 Different mechanical stack-up; re-characterization may be needed <p>Choice: FS-L-095-103-RH (95 mm, 10 k\u03a9) FS-L-095-103-RH</p> <p>Rationale: Fits the mechanical reach and provides a large, clean ADC span with a simple divider. It\u2019s well-documented and readily available in class-friendly quantities.</p>"},{"location":"02-Component-Selection/Component-Selection/#block-voltage-divider","title":"Block: Voltage Divider","text":"<p>Role: Convert the flex sensor\u2019s resistance change to a 0\u20135 V signal for RA0/AN0; optionally filter/buffer.</p> Solution Photo Cost Link Pros Cons Option 1: Simple divider (10 k\u03a9 sensor vs fixed Rin 10\u201322 k\u03a9) &lt;$0.10 Voltage divider (ref) \u2022 Minimal BOM \u2022 Works straight into ADC \u2022 Source impedance varies \u2192 sampling error \u2022 No anti-alias filtering Option 2: Divider + RC low-pass (e.g., 1 k\u03a9 + 0.1 \u00b5F) &lt;$0.20 RC low-pass (ref) \u2022 Noise reduction \u2022 Stabilizes readings \u2022 Limits aliasing \u2022 Adds latency; cutoff must be chosen Option 3: Buffer with rail-to-rail op-amp (MCP6002) ~\\(0.40\u2013\\)0.80 MCP6002 product \u00b7 Datasheet PDF \u2022 High input Z; isolates ADC \u2022 Rail-to-rail @ 5 V \u2022 Easy to add active filter/gain \u2022 Slightly higher BOM &amp; layout effort <p>Choice: Option 2: Divider + RC, with an upgrade path to Option 3 if noise or ADC impedance issues are observed. Rationale: RC filtering stabilizes the measurement with negligible cost/complexity; buffering remains a drop-in improvement if needed.</p>"},{"location":"02-Component-Selection/Component-Selection/#block-5-v-regulator-from-9-v-source","title":"Block: 5 V Regulator (from 9 V source)","text":"<p>Role: Provide regulated 5 V to the Curiosity Nano + sensor chain.</p> Solution Photo Cost Link Pros Cons Option 1: onsemi MC7805ACTG (TO-220, 5 V / 1.5 A) ~$1 Digi-Key MC7805ACTG \u2022 Simple &amp; robust \u2022 Easy to heatsink \u2022 Low EMI \u2022 Linear \u2192 heat from 9\u21925 V at higher I Option 2: TI LM2940-5.0 (TO-220, ~1 A) ~\\(2\u2013\\)3 TI LM2940 product page \u2022 Lower dropout than 7805 \u2022 Good line/load behavior \u2022 Still linear (heat) \u2022 ~1 A limit Option 3: LM2596 buck module (5 V, up to ~3 A) ~\\(3\u2013\\)6 LM2596 module (Addicore) \u2022 High efficiency \u2022 Low heat \u2022 Higher current headroom \u2022 Module height; EMI care/layout practice <p>Choice: MC7805ACTG MC7805ACTG for the current subsystem load; I would switch to LM2596 if total current rises.</p> <p>Rationale: For Nano + sensor (&lt;~150 mA worst-case), a 7805 is the quietest, lowest-risk choice. If future peripherals raise current or thermal budget, the buck module avoids dissipation.</p> <p>Thermal note: \\( P*{\\text{diss}} = (9\\ \\text{V} - 5\\ \\text{V}) \\times I*{\\text{total}} \\). Example: at 120 mA \u2192 \\(0.48\\ \\text{W}\\) (fine on TO-220 with airflow). Add a small heatsink if \\(&gt;0.8\\ \\text{W}\\).</p>"},{"location":"02-Component-Selection/Component-Selection/#block-external-power-source-feeds-the-5-v-rail","title":"Block: External Power Source (feeds the 5 V rail)","text":"Solution Photo Cost Link Pros Cons Option 1: 9 V wall adapter, 2.1 mm barrel (center +) ~\\(8\u2013\\)12 CUI DPD series datasheet \u2022 Clean, regulated \u2022 Plug-and-play \u2022 No charging concerns \u2022 Tethered to mains Option 2: 6\u00d7AA holder (9 V alkaline / ~7.2 V NiMH) ~\\(1\u2013\\)3 DFRobot 6\u00d7AA holder \u2022 Cheap, simple \u2022 Field-portable \u2022 Requires cells/charger \u2022 V droop under load Option 3: 2\u00d718650 holder (7.4 V nominal) + buck to 5 V ~\\(2\u2013\\)5 (+ cells) Parts-Express 2\u00d718650 holder \u2022 High energy density \u2022 Reusable cells \u2022 Li-ion safety/charging management <p>Choice: 9 V wall adapter 9V adapter for bench bring-up; consider 2\u00d718650 + buck for mobile demos later.</p> <p>Rationale: The adapter minimizes risk and simplifies testing; battery paths add charging/cutoff complexity not needed for MVP.</p>"},{"location":"02-Component-Selection/Component-Selection/#block-connectors-sensor-input-subsystem-headers","title":"Block: Connectors (sensor input + subsystem headers)","text":"Solution Photo Cost Link Pros Cons Option 1: JST-XH (2.5 mm pitch) wire-to-board Low JST XH datasheet \u2022 Locking friction \u2022 ~3 A (AWG22) \u2022 Widely available \u2022 Not breadboard-friendly Option 2: Molex/JST-XH assortment kit \\(20\u2013\\)30 Adafruit JST-XH kit (PDF) \u2022 Handy assortment for lab builds \u2022 Bulk purchase; storage overhead Option 3: 0.1\u2033 (2.54 mm) pin headers + housings Very low Adafruit 0.1\u2033 break-away header \u2022 Breadboard-compatible \u2022 Lowest cost \u2022 No latch; can pull loose <p>Choice: JST-XH JST-XH on the PCB for field connections; 0.1\u2033 headers for bench adapters.</p> <p>Rationale: XH gives retention and current capacity on-device; 0.1\u2033 is convenient during prototyping.</p>"},{"location":"02-Component-Selection/Component-Selection/#microcontroller","title":"Microcontroller","text":"Solution Photo Cost Link Pros Cons PIC18F57Q43 Curiosity Nano (Dev Board) ~\\(25\u2013\\)35 Microchip DM164150 \u2022 On-board debugger \u2022 Fast bring-up \u2022 Known pinout \u2022 Larger footprint \u2022 Dev-board BOM cost Bare PIC18F57Q43 on custom PCB ~\\(3\u2013\\)6 PIC18F57Q43 product \u2022 Lowest per-unit cost \u2022 Small footprint \u2022 Needs programming/debug HW \u2022 Longer bring-up Alt MCU Dev Board (ATmega4809 Curiosity Nano) ~\\(25\u2013\\)30 ATmega4809 Curiosity Nano \u2022 Similar toolchain \u2022 Many examples \u2022 Porting effort \u2022 Different peripherals <p>Choice: PIC18F57Q43 Curiosity Nano Curiosity Nano</p> <p>Rationale: Lowest risk and fastest path for this course: on-board debugger, USB power, and immediate access to RA0/RA2 (ADC) + RA1/RB2/RC4 (digital outs). Provided in class</p> <p>Unregulated Power Supply</p> <ol> <li>Wall Adapter Power Supply - 12VDC, 600mA (Barrel Jack)</li> </ol> <p></p> <ul> <li>$9.25/each</li> <li>link to product</li> </ul> Pros Cons High voltage Expensive Enough current Only needed for the motor Uses a barrel jack Not a well known supplier <ol> <li>Switching Split Power Supply \u00b1 12V 500mA Split Supply</li> </ol> <p></p> <ul> <li>$14.95/each</li> <li>Link to product</li> </ul> Pros Cons Multiple jacks If used with other things would need a seperate voltage regulator Not too much current Might not need the white power supply line Up to 12 V Short cord length <ol> <li>12V 5A switching power supply</li> </ol> <p></p> <ul> <li>$24.95/each</li> <li>Link to product</li> </ul> Pros Cons Up to 12 V High current You can use any plug adapter Expensive There's a green indicator light to let you know it's working Bulky in the middle of wires <p>Choice: 12V 5A switching power supply 12V 5A switching power supply</p> <p>Rationale: Though the supplier is not as well known and the data sheet is harder to understand, this had enough current without going overboard since this will power the whole system and not just this subsystem.</p> <p>--</p>"},{"location":"02-Component-Selection/Component-Selection/#pin-table","title":"Pin Table","text":"Function PIC Pin Notes Flex sensor ADC RA0 Divider output 0\u20135 V Rotary sensor (analog input) RA2 From Rotary subsystem (if DAC used) Rotary sensor (UART input) RF1 From Rotary subsystem (if UART used) Motor control 1 (digital in) RA1 From Motor subsystem via Connector 2 Motor control 2 (digital out) RB2 To Motor Subsystem LED RA3 Flex Sensor Reading Errors Switch RC3 To turn off flex sensor reading"},{"location":"02-Component-Selection/Component-Selection/#mcc-configuration-pic18f57q43-detailed-documentation","title":"MCC Configuration (PIC18F57Q43) \u2014 Detailed Documentation","text":"<p>This section is added to address the feedback item: \u201cUpdated MCC Configuration (PIC) with all the microcontroller's subsystems and pins used.\u201d</p> <p>The table below matches the actual pin assignments shown in MPLAB MCC and explains why each pin was chosen.</p> Subsystem Function PIC Pin MCC Module Direction Purpose Flex Sensor ADC Input RA0 ADC1 Input Receives 0\u20135 V signal from divider + RC. Rotary Sensor ADC Input RA2 ADC2 Input Used when rotary subsystem outputs analog rotation angle. Rotary Sensor UART Input RF1 UART RX Input Used if rotary subsystem outputs digital angle over UART. Motor Control Signal (in) RA1 GPIO Input Motor \u2192 Flex subsystem communication. Motor Control Signal (out) RB2 GPIO Output Flex subsystem sends STOP/SAFE signals to motor subsystem. Error LED Output RA3 GPIO Output Red LED indicates flex sensor error or mismatched readings. Debug Switch RC3 GPIO Input Allows debugging / disabling flex sensing while testing. <p>This satisfies the MCC configuration requirement.</p>"},{"location":"03-BOM/BOM/","title":"Bill of Materials","text":""},{"location":"03-BOM/BOM/#bill-of-materials-lakshanands-individual-subsystem","title":"Bill of Materials \u2013 Lakshanand's Individual Subsystem","text":"<p>Revised: October 31, 2025</p> Part Name / Description Unit Qty Per Unit Cost Total Cost Manufacturer Manufacturer Part # Supplier Vendor Part Number Datasheet Link Supplier Part # # Ordered Date Ordered # Received Schematic Reference Designators 8-Pin PCB Connector 2 8.99 8.99 ACERMIC ACERMIC Amazon (user link) J14 15 k\u03a9 Resistor 1 5.99 5.99 Edgelec (assumed) (Amazon resistor kit) Amazon (user link) R20 Flex Sensor 10 k\u03a9\u201320 k\u03a9 1 12.95 12.95 Adafruit 182 (Long Flex Sensor) Adafruit/Digi-Key ADA-182 https://cdn-shop.adafruit.com/datasheets/SpectraFlex.pdf U9 Solid Rubber Strip (Flex Sensor Support) 1 8.99 8.99 NABOWAN (listing) (rubber neoprene strip) Amazon (user link) MECH1"},{"location":"04-Schematic/schematic/","title":"Schematic","text":"<p>Schematic</p> <p></p> <p>The schematic shows all connections for the PIC18F57Q43 Curiosity Nano, power regulation, sensor input, and interface headers. Bypass capacitors (0.1 \u00b5F) are placed near each VDD pin. The regulator receives 9\u201312 V from an external adapter and provides a clean 5 V rail to the board.</p> <p>The PDF of the schematic can be viewed and downloaded by Github.</p>"},{"location":"04-Schematic/schematic/#schematic-files-final-design","title":"Schematic Files (Final Design)","text":"<ul> <li>Rasterized schematic image (PNG/JPG): <code>Capture.png</code> (shown above)</li> <li>High-resolution schematic PDF: Download schematic PDF</li> <li>Schematic ECAD project (.zip): Download schematic ECAD project</li> </ul>"},{"location":"05-Power-Budget/Power-Budget/","title":"Power Budget","text":""},{"location":"05-Power-Budget/Power-Budget/#power-budget","title":"Power Budget","text":""},{"location":"05-Power-Budget/Power-Budget/#overview","title":"Overview","text":"<p>This page presents the final power budget for the automatic door opener. The goal of the power budget is to estimate the maximum possible current draw from each major subsystem and verify that our chosen power supplies and voltage regulators are correctly sized.</p> <p>The team uses a single 12 V system supply (shared by the motor and all electronic subsystems). Each subsystem then regulates down to its required voltage (for example, 5 V for the PIC18F57Q43 Curiosity Nano and sensors). The power budget spreadsheet uses the course template: every major component is listed with its operating voltage, maximum current (from datasheets), and a 25% margin column.</p> <p></p> <p>This image (<code>power.png</code>) is exported directly from the final team power budget spreadsheet and reflects the current, final design of all four subsystems.</p>"},{"location":"05-Power-Budget/Power-Budget/#conclusions","title":"Conclusions","text":"<p>We used the power budget in the template to sum the maximum currents for:</p> <ul> <li>The motor subsystem (which dominates the 12 V current),</li> <li>The flex sensor subsystem (PIC18F57Q43 Nano, flex sensor, op-amp, LED, switch),</li> <li>The rotary encoder subsystem, and</li> <li>Any additional control or support electronics.</li> </ul> <p>From this spreadsheet we found:</p> <ul> <li>The total current at 12 V stays well below the 5 A rating of our chosen 12 V switching power supply, even after adding a 25% safety margin to each subsystem row in the template.</li> <li>The flex sensor subsystem only draws on the order of ~120 mA at 5 V, which confirms that our simple MC7805 5 V linear regulator is adequate and will not overheat in normal operation.</li> <li>Because all subsystems share the same 12 V source, the power budget helped ensure that the motor\u2019s peak current plus all electronics still fit within the safe operating range of the supply and motor driver.</li> <li>The analysis also showed that trying to run the full system from a small 9 V battery would give limited runtime and poor efficiency, supporting our decision to stay with a wall-powered 12 V brick for this project.</li> </ul> <p>Overall, the power budget confirmed that:</p> <ul> <li>Our 12 V 5 A supply provides enough headroom for all subsystems,</li> <li>Each regulator (especially the 5 V regulator for the flex subsystem) operates within its safe current and thermal limits, and</li> <li>The design can tolerate reasonable future additions (extra indicators, small sensors) without needing a complete power redesign.</li> </ul>"},{"location":"05-Power-Budget/Power-Budget/#resources","title":"Resources","text":"<p>Power Budget (PNG): here</p> <p>Power Budget (Excel Sheet): here</p>"},{"location":"05-Power-Budget/readme/","title":"Power Budget","text":""},{"location":"05-Power-Budget/readme/#power-budget","title":"Power Budget","text":"<p>This document details the estimated power consumption of the system.</p>"},{"location":"05-Power-Budget/readme/#summary-table","title":"Summary Table","text":"Component Power (W) Motor 50 Controller 10 Sensors 5 Total 65"},{"location":"06-PCB%20Design/pcbdesign/","title":"Pcbdesign","text":"<p>PCB DESIGN</p> <p></p> <p>The PCB layout includes a two-layer design (top and bottom copper), with clear routing for power and sensor signals. Mounting holes and connector pads are positioned for easy assembly. Top layer is N55768 which is supplied with +5v and bottom layer is connected to ground.</p> <p>The PDF of the board can be downloaded by . Cliking here Gerber Files can be download by Cliking here</p>"},{"location":"06-PCB%20Design/pcbdesign/#ecad-pcb-design-frontback","title":"ECAD PCB Design (Front/Back)","text":"<p>The ECAD image above (<code>schem6.png</code>) shows the final routed PCB, including both the top and bottom copper layers. It represents the final board outline, mounting holes, component footprints, and power/signal routing for the flex sensor subsystem.</p> <p>Top Copper Layer (ECAD) </p> <p>Bottom Copper Layer (ECAD) </p> <p>If needed, separate ECAD views (top and bottom only) can also be exported from the ECAD tool and added here, but <code>schem6.png</code> is the primary ECAD view for this design.</p>"},{"location":"06-PCB%20Design/pcbdesign/#fabricated-pcb-assembled-real-board-photos","title":"Fabricated PCB \u2014 Assembled (Real Board Photos)","text":"<p>The following images are photographs of the real, fabricated PCB after assembly and soldering. These satisfy the requirement for final PCB photos, front and back, after population and testing.</p> <p>Assembled PCB Front (real board)</p> <p></p> <p>Assembled PCB Back (real board)</p> <p></p> <p>The assembled board was verified for:</p> <ul> <li>Correct 5 V regulation from the external supply</li> <li>Proper routing of the flex sensor signal into the ADC</li> <li>Correct operation of the LED indicator and debug switch</li> <li>Continuity and absence of unintended shorts on power and ground planes</li> </ul>"},{"location":"06-PCB%20Design/pcbdesign/#ecad-and-gerber-archives-final-submission","title":"ECAD and Gerber Archives (Final Submission)","text":"<p>For manufacturing and reproducibility, the final ECAD design files and Gerber outputs are provided as ZIP archives in this repository.</p> <ul> <li>Final ECAD Project (.zip): Download ECAD Project</li> <li>Final Gerber Files (.zip): Download Gerber Files</li> </ul>"},{"location":"07-Microcontroller-Code/mccode/","title":"Mccode","text":"<p>Microcontroller Code</p> <p>Download my C code here: Microchip Code</p>"},{"location":"08-Hardware%20V2.0/hardware/","title":"Hardware V2.0","text":""},{"location":"08-Hardware%20V2.0/hardware/#hardware-v20-future-improvements-to-the-flex-sensor-subsystem","title":"Hardware V2.0 \u2014 Future Improvements to the Flex Sensor Subsystem","text":"<p>This page outlines proposed improvements for a Version 2.0 of the flex sensor subsystem hardware. The discussion is based on the current schematic (shown on the Schematic page) which includes the PIC18F57Q43 Curiosity Nano, a linear 5 V regulator, flex sensor interface (divider + op-amp), indicator LED, switch, and connectors to the rest of the system.</p> <p>The goals of Hardware V2.0 are to:</p> <ul> <li>Improve reliability and noise performance</li> <li>Reduce power dissipation and board complexity</li> <li>Improve mechanical robustness and serviceability</li> <li>Make the subsystem easier to manufacture, debug, and integrate with the rest of the project</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#1-power-architecture-improvements","title":"1. Power Architecture Improvements","text":""},{"location":"08-Hardware%20V2.0/hardware/#11-move-from-linear-regulator-to-switching-regulator-if-system-current-increases","title":"1.1 Move from Linear Regulator to Switching Regulator (If System Current Increases)","text":"<p>In the current schematic, a 7805-style linear regulator drops 9\u201312 V down to 5 V for the Curiosity Nano and sensor circuitry. This is acceptable for Version 1 because the current is relatively low, but it becomes inefficient as more loads (motors, additional sensors, etc.) are added.</p> <p>V2.0 Improvement:</p> <ul> <li>Replace the linear 5 V regulator with a buck (switching) regulator module or IC.</li> <li>Keep the 5 V output available for both this subsystem and any future logic/sensor expansions.</li> </ul> <p>Why:</p> <ul> <li>Reduces heat dissipation compared to a linear regulator (especially with 12 V input).</li> <li>Improves overall system efficiency and allows more headroom for additional loads without thermal concerns.</li> <li>Makes the design more scalable to a full production system.</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#12-enhanced-protection-on-power-input","title":"1.2 Enhanced Protection on Power Input","text":"<p>The current schematic shows a regulator connected to a 9\u201312 V supply, but protection elements are minimal.</p> <p>V2.0 Improvement:</p> <ul> <li>Add a reverse-polarity protection element (e.g., FET or diode).</li> <li>Add a fuse or resettable polyfuse on the input.</li> <li>Add a TVS diode for surge protection and ESD on the external power jack.</li> </ul> <p>Why:</p> <ul> <li>Protects the board from incorrect power connections and transient events.</li> <li>Reduces risk of damage during lab use and future field deployment.</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#2-signal-integrity-and-sensing-accuracy","title":"2. Signal Integrity and Sensing Accuracy","text":"<p>The current schematic already includes a voltage divider and bypass capacitors near VDD pins. However, as the project evolves, signal integrity and sensor accuracy become more important.</p>"},{"location":"08-Hardware%20V2.0/hardware/#21-dedicated-analog-grounding-and-filtering","title":"2.1 Dedicated Analog Grounding and Filtering","text":"<p>In Version 1, analog and digital grounds share the same plane. This is acceptable but could be improved.</p> <p>V2.0 Improvement:</p> <ul> <li>Introduce an analog ground region around the flex sensor divider and op-amp.</li> <li>Use a single-point connection between analog and digital grounds near the ADC reference.</li> <li>Refine the RC filter values to match the actual bending speed and sampling rate from the schematic\u2019s ADC configuration.</li> </ul> <p>Why:</p> <ul> <li>Reduces noise injected from digital switching and motor-related transients into the flex sensor measurement.</li> <li>Provides more stable ADC readings and improves accuracy in detecting small bending changes.</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#22-improved-flex-sensor-interface-instrumentation","title":"2.2 Improved Flex Sensor Interface (Instrumentation)","text":"<p>Currently, the flex sensor is read through a simple divider and an op-amp configured as a buffer or low-pass filter stage.</p> <p>V2.0 Improvement:</p> <ul> <li>Consider using an instrumentation amplifier or a dedicated precision amplifier stage for the sensor.</li> <li>Add test pads at the sensor output and op-amp output so that signals can be probed easily during debugging.</li> </ul> <p>Why:</p> <ul> <li>Better measurement linearity and gain adjustment if future requirements need higher resolution of small angle changes.</li> <li>Test pads make it easier to validate the analog path without modifying the board.</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#3-microcontroller-integration-and-io","title":"3. Microcontroller Integration and I/O","text":"<p>In the current design, the PIC18F57Q43 Curiosity Nano dev board is used directly on the PCB or via header connections.</p>"},{"location":"08-Hardware%20V2.0/hardware/#31-transition-toward-a-fully-integrated-mcu","title":"3.1 Transition Toward a Fully Integrated MCU","text":"<p>V2.0 Improvement:</p> <ul> <li>Move from a plug-in Curiosity Nano dev board to a bare PIC18F57Q43 placed directly on the custom PCB.</li> <li>Bring the programming/debug interface (ICSP or similar) to a small dedicated header.</li> </ul> <p>Why:</p> <ul> <li>Reduces size and cost per unit if the design were scaled beyond the class project.</li> <li>Gives more control over layout around the MCU (shorter analog traces, cleaner ground).</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#32-enhanced-io-and-test-access","title":"3.2 Enhanced I/O and Test Access","text":"<p>V2.0 Improvement:</p> <ul> <li>Add labeled test points for key signals: flex sensor output, op-amp output, motor control signals, and UART lines to the rotary encoder subsystem.</li> <li>Clearly label connector pinouts on the silkscreen (e.g., 5V, GND, SIG, TX, RX).</li> </ul> <p>Why:</p> <ul> <li>Simplifies bench debugging and brings the hardware closer to the schematic intent (easier to correlate the schematic nets with physical points).</li> <li>Reduces wiring mistakes when integrating with other subsystems.</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#4-mechanical-and-connector-improvements","title":"4. Mechanical and Connector Improvements","text":"<p>The current board already includes mounting holes and basic connectors as shown in the PCB and schematic.</p>"},{"location":"08-Hardware%20V2.0/hardware/#41-robust-connectors-for-field-use","title":"4.1 Robust Connectors for Field Use","text":"<p>V2.0 Improvement:</p> <ul> <li>Standardize on locking connectors (e.g., JST-XH) for all external connections related to the flex sensor and subsystem I/O.</li> <li>Ensure connectors are oriented in a way that matches cable routing in the full system enclosure.</li> </ul> <p>Why:</p> <ul> <li>Prevents accidental unplugging during movement of the door mechanism.</li> <li>Makes wiring more intuitive and reduces debugging time caused by loose or reversed cables.</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#42-mechanical-strain-relief-for-the-flex-sensor","title":"4.2 Mechanical Strain Relief for the Flex Sensor","text":"<p>V2.0 Improvement:</p> <ul> <li>Add mechanical mounting / strain relief holes or features near the flex sensor connection.</li> <li>Potentially add a small clamp or anchor footprint for a cable tie to reduce bending stress near the soldered pads.</li> </ul> <p>Why:</p> <ul> <li>Flex sensors are mechanically fragile near the tail; reducing stress near the connector improves life and reliability.</li> <li>Aligns hardware design with the flex sensor\u2019s mechanical usage conditions implied by the schematic.</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#5-documentation-and-versioning","title":"5. Documentation and Versioning","text":"<p>Finally, Hardware V2.0 would also enhance how the design is documented and maintained.</p> <p>V2.0 Improvement:</p> <ul> <li>Include version labels (e.g., \u201cFlex Subsystem PCB V2.0\u201d) on the silkscreen and in the schematic title block.</li> <li>Keep the schematic, PCB, and Gerber ZIPs organized under a <code>hardware_v2</code> directory in the repository.</li> </ul> <p>Why:</p> <ul> <li>Makes it easy to distinguish between V1.0 and V2.0 hardware during future debugging or replacement.</li> <li>Ensures the schematic and PCB images on the documentation pages always match the physical hardware version being tested.</li> </ul>"},{"location":"08-Hardware%20V2.0/hardware/#summary","title":"Summary","text":"<p>Hardware V1.0 meets the course and project requirements, but a future Hardware V2.0 could:</p> <ul> <li>Improve efficiency and thermal performance through a switching regulator.</li> <li>Enhance measurement accuracy and robustness with better grounding, filtering, and amplifiers.</li> <li>Increase maintainability and manufacturability by integrating the MCU, adding test points, and standardizing connectors.</li> <li>Improve mechanical durability of the flex sensor and wiring.</li> </ul> <p>These changes all build directly on the existing schematic and PCB, using the current design as a stable baseline for iteration rather than a complete redesign.</p>"},{"location":"09-%20Resource/resource/","title":"Resources","text":""},{"location":"09-%20Resource/resource/#resources","title":"Resources","text":"<p>This page collects the final project resources for the Flex Sensor Subsystem, including the firmware (MPLAB X project) and any CAD files used for 3D-printed parts.</p>"},{"location":"09-%20Resource/resource/#firmware-project-mplab-x","title":"Firmware Project (MPLAB X)","text":"<p>The complete MPLAB X project for the final Version 1.0 firmware is provided as a zipped archive.</p> <p>Final MPLAB X code project (.zip): Download MPLAB X project</p>"},{"location":"09-%20Resource/resource/#cad-files-for-3d-printed-parts","title":"CAD Files for 3D-Printed Parts","text":"<p>If any mechanical or mounting components were 3D-printed (e.g., sensor brackets, PCB standoffs, door interface mounts), the associated CAD files are provided here as a zipped archive.</p> <ul> <li>Final 3D CAD files (.zip): Download CAD files</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/","title":"Lessons Learned and Recommendations for Future Students","text":""},{"location":"10-Lesson%20Learned/lesson/#lessons-learned-and-recommendations-for-future-students","title":"Lessons Learned and Recommendations for Future Students","text":"<p>This project took the Flex Sensor Subsystem all the way from concept \u2192 schematic \u2192 PCB \u2192 firmware \u2192 integration with the motor and rotary encoder subsystems. Along the way there were a lot of small \u201coops\u201d moments that turned into useful lessons. This page summarizes what worked, what didn\u2019t, and what I would recommend to future students doing a similar hardware project.</p>"},{"location":"10-Lesson%20Learned/lesson/#lessons-learned","title":"Lessons Learned","text":""},{"location":"10-Lesson%20Learned/lesson/#1-pin-planning-and-mcc-setup-matter-more-than-expected","title":"1. Pin Planning and MCC Setup Matter More Than Expected","text":"<p>One of the most surprisingly time-consuming tasks was getting the PIC18F57Q43 pin configuration (MCC) correct and keeping it synced with the schematic and documentation.</p> <ul> <li>I changed pin assignments a few times (especially around RA0/RA2/RF1), which meant I had to update the schematic, PCB labels, the pin table, and MCC each time.</li> <li>A small mismatch (like listing RF1 as an ADC when it\u2019s actually UART RX) can break the system in subtle ways.</li> </ul> <p>Lesson: Freeze your pinout early and treat MCC, schematic symbols, and the \u201cpin table\u201d in your report as a single unit. Change one \u2192 change all three immediately.</p>"},{"location":"10-Lesson%20Learned/lesson/#2-analog-front-end-quality-directly-affects-system-behavior","title":"2. Analog Front-End Quality Directly Affects System Behavior","text":"<p>The flex sensor looks simple on paper (just a resistor that changes with bend), but in practice:</p> <ul> <li>It is noisy and non-linear.</li> <li>The ADC readings jump around if you don\u2019t filter or buffer the signal properly.</li> <li>The op-amp / RC filter made a big improvement in stability.</li> </ul> <p>Lesson: Take the analog side seriously. Even for \u201csimple\u201d sensors, add:</p> <ul> <li>Proper voltage divider values (not too high, not too low).</li> <li>At least a basic RC low-pass filter.</li> <li>A buffer op-amp if the ADC input impedance could cause error.</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/#3-grounding-and-power-are-easy-to-underestimate","title":"3. Grounding and Power Are Easy to Underestimate","text":"<p>It\u2019s tempting to focus on signals and forget about ground and power, but:</p> <ul> <li>Sharing ground with motor currents can inject noise into the sensor readings.</li> <li>The linear regulator is simple, but it does dissipate real power when stepping from 9\u201312 V to 5 V.</li> <li>Bypass capacitors close to the PIC\u2019s VDD/VSS pins are absolutely required, not optional.</li> </ul> <p>Lesson: Spend time on power and grounding early:</p> <ul> <li>Place bypass caps correctly (not just \u201con the schematic\u201d but close in the PCB).</li> <li>Think about where motor return currents flow relative to your sensor grounds.</li> <li>Give yourself current and thermal margin in the power budget.</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/#4-pcb-design-is-iterative-and-reality-wins-over-cad","title":"4. PCB Design Is Iterative (and Reality Wins Over CAD)","text":"<p>The PCB looks clean in ECAD (schem6.png), but real life uncovered a few things:</p> <ul> <li>Connector orientations and silkscreen labels are easy to misunderstand until you physically plug things in.</li> <li>Clear labeling of 5V, GND, and signal lines on the silkscreen saves a lot of time.</li> <li>Having test points (even just small pads) on key nodes would have made debugging easier.</li> </ul> <p>Lesson: Design the PCB with debugging in mind:</p> <ul> <li>Add test pads for important analog nodes and communication lines.</li> <li>Label connector pins and key signals on silkscreen.</li> <li>Think about cable routing and real mechanical constraints, not just the 2D view.</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/#5-documentation-is-easier-if-you-do-it-as-you-go","title":"5. Documentation Is Easier If You Do It as You Go","text":"<p>A lot of this report\u2014component selection, power budget, block diagram explanations, and PCB documentation\u2014would have been painful if done at the last minute.</p> <p>Lesson: Update your Markdown pages, images, and tables incrementally:</p> <ul> <li>When you pick a final part \u2192 immediately update the component selection table.</li> <li>When you finalize a pin mapping \u2192 update the pin table and MCC screenshot.</li> <li>When you generate a new schematic or PCB revision \u2192 export and replace the PNG/PDF right away.</li> </ul> <p>This keeps the report and the hardware in sync and avoids a panic rewrite later.</p>"},{"location":"10-Lesson%20Learned/lesson/#recommendations-for-future-students","title":"Recommendations for Future Students","text":""},{"location":"10-Lesson%20Learned/lesson/#1-start-prototyping-analog-mcu-early","title":"1. Start Prototyping Analog + MCU Early","text":"<ul> <li>Get one sensor + MCU working on a breadboard before fully committing to a PCB.</li> <li>Confirm ADC ranges, noise level, and timing in firmware.</li> <li>Use this early test to refine your RC filter and divider values.</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/#2-lock-down-pinout-before-final-pcb","title":"2. Lock Down Pinout Before Final PCB","text":"<ul> <li>Plan ADC, UART, PWM, and GPIO needs on paper or in a spreadsheet.</li> <li>Configure MCC and verify all required peripherals are mapped correctly.</li> <li>Only after you are happy with the pinout should you finalize the schematic and PCB.</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/#3-treat-power-budget-as-a-design-tool-not-just-a-checkbox","title":"3. Treat Power Budget as a Design Tool, Not Just a Checkbox","text":"<ul> <li>Use the power budget to pick your regulator type, heat dissipation expectations, and source sizing.</li> <li>Include a margin (e.g., +25%) so surprises don\u2019t break your design.</li> <li>If you ever add motors or higher loads, seriously consider a buck regulator instead of just scaling up a linear regulator.</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/#4-add-extra-debug-features-leds-test-pads-headers","title":"4. Add Extra Debug Features (LEDs, Test Pads, Headers)","text":"<ul> <li>One or two extra LEDs (status, error) and a couple of test pads can save hours in the lab.</li> <li>Break out one spare UART or debug header if you can.</li> <li>These don\u2019t cost much in PCB area but greatly improve visibility into what the board is doing.</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/#5-use-version-control-and-clear-file-naming","title":"5. Use Version Control and Clear File Naming","text":"<ul> <li>Keep schematic, PCB, and project zips labeled clearly: <code>v1</code>, <code>v2</code>, etc.</li> <li>Don\u2019t keep relying on <code>final.pdf</code> / <code>final2.pdf</code> / <code>final_final.pdf</code>\u2014use dates or version numbers.</li> <li>Commit changes with short notes like \u201cupdated RA2 to ADC2 input\u201d so future you knows what changed.</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/#6-ask-for-feedback-early-and-actually-apply-it","title":"6. Ask for Feedback Early (and Actually Apply It)","text":"<ul> <li>Take advantage of TA / instructor feedback on block diagrams, power budgets, and MCC configuration.</li> <li>Fix issues as soon as they\u2019re pointed out instead of letting them accumulate.</li> <li>Many later \u201cmystery bugs\u201d are just the result of earlier feedback not being integrated.</li> </ul>"},{"location":"10-Lesson%20Learned/lesson/#closing-thoughts","title":"Closing Thoughts","text":"<p>The flex sensor subsystem ended up doing more than just reading a bend\u2014it became a safety and validation node for the entire automatic door system. Going through the full process (schematic \u2192 PCB \u2192 firmware \u2192 integration) is challenging but also realistic compared to how real hardware projects run.</p> <p>If future students focus on:</p> <ul> <li>Solid pin planning &amp; power design,</li> <li>Respect for the analog details,</li> <li>And disciplined documentation + versioning,</li> </ul> <p>their Version 1.0 will feel much more like a Version 2.0 from the start.</p>"},{"location":"Appendix/Inputs%20from%20Design%20Review/","title":"Appendix \u2013 Inputs from Design Review","text":""},{"location":"Appendix/Inputs%20from%20Design%20Review/#action-items-feedback-summary","title":"Action Items / Feedback Summary","text":"<ul> <li>The resistor currently tied between +5 V and GND is not required and should be deleted.</li> <li>Ensure all through-hole pads (especially high-current or ground pads) have thermal relief spokes to improve solderability.</li> <li>One labeled test point per pin for debugging and probing.</li> <li>Do not route every GND pin back to the barrel jack pad.</li> <li>Instead, use a ground plane (bottom layer) for return paths and improved noise performance.</li> <li>Reduces via count and keeps power trace shorter and wider.</li> <li>Avoid default names like <code>N0001</code>.</li> <li>Use meaningful labels (e.g., <code>FLEX_OUT</code>, <code>ADC_VIN</code>, <code>5V_IN</code>, <code>MOTOR_EN</code>, etc.).</li> <li>If the flex sensor readings saturate or the hinge angle exceeds its bend rating.</li> <li>Mount the flex sensor on a thin flexible silicon strip or similar compliant material</li> <li>This allows the door to move fully without forcing the sensor to bend beyond its limit.</li> </ul>"},{"location":"Appendix/Inputs%20from%20Design%20Review/#feedback-from-draukes","title":"Feedback from Dr.Aukes","text":"<p>-\"Flex Sensor\" was obscured by another element. \u2014 corrected</p> <p>-Block spacing was inconsistent, and connectors were not attached to block edges. \u2014 corrected</p> <p>-\"Interfaces\" (connection points) were incorrectly placed inside blocks instead of on their boundaries. \u2014 corrected</p> <p>-Text was missing on arrows; double-clicking on the arrow to add text has been done. \u2014 corrected</p> <p>-Font sizes were inconsistent across the document and among teammates; uniform font sizing has been applied. \u2014 corrected</p> <p>-The voltage \u201cregion\u201d is now used instead of a separate voltage regulator box to reduce unnecessary wiring. \u2014 corrected</p> <p>-Connector I/O details have been clearly provided. \u2014 corrected</p> <p>-ADC1 has been labeled and accompanied by uniquely formatted notes. \u2014 corrected</p> <p>-Overall formatting and labeling have been improved for clarity and consistency. \u2014 corrected</p>"}]}